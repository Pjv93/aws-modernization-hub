<!doctype html>
<html lang="en">
<head>
    <!-- required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- bootstrap css -->
    <link rel="stylesheet" href="content/bootstrap/css/bootstrap.min.css" />
    <!-- fontawesome css -->
    <link rel="stylesheet" href="content/fontawesome-5.0.13/web-fonts-with-css/css/fontawesome-all.min.css">
    <!-- site specific css -->
    <link href="content/css/site.css" rel="stylesheet" />
    <title>AWS Module Detail Page</title>
</head>
<body role="document">
    <div class="parent-div">
        <div class="main-div">
            <!-- header section-->
            <header role="banner" class="bg-blue">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <img class="navbar-brand d-flex align-items-center aws-logo" src="content/images/AWS_logo_RGB_REV.svg" alt="amazon-logo" />
                            <nav class="nav spacer-inner-tb-20" role="navigation">
                                <a class="nav-item" href="homepage.html" role="link"> Home </a>
                                <a class="nav-item" href="explore.html" role="link"> Explore </a>
                            </nav>
                        </div>
                    </div>
                </div>
            </header>
			<!-- workshop title with the modules menu -->
            <nav class="container" role="menubar">
                <div class="row">
                    <div class="col-12 col-sm-auto spacer-mob-span">
                        <h3 class="title-3 color-blue current text-uppercase spacer-t-sm" role="menuitem">
                            Digital Modernization <i class="fas fa-angle-right color-orange ml-3 d-none d-xl-inline-block font-23" aria-hidden="true"></i>
                        </h3>
                    </div>
                    <div class="w-100 d-inline d-xl-none d-block border-bottom border-bottom"></div>
                    <div class="col-12 col-sm-auto spacer-mob-span pl-sm-0 d-none d-xl-block">
                        <div class="nav-secondary-item dropdown btn-group pl-sm-0">
                            <span class="btn btn-link nav-secondary-btn menuItem"> Container Registry </span>
                            <div id="customDropdown" class="custom-dropdown-open" style="display:none;">
                                <div class="text-center scroll" id="up"><i class="fas fa-angle-up"></i></div>
                                <div id="scroller" class="menu-holder">
                                    <ul class="custom-dropdown-menu content nav-secondary">
                                        <li role="menuitem"><a href="#" class="dropdown-item">Create Workshop Environment</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Getting Started</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Containerize Application</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Artifactory</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item active">Container Registry</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Amazon ECS & Fargate</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Amazon EKS</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Application Monitoring</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Automation</a></li>
                                        <li role="menuitem"><a href="#" class="dropdown-item">Container Elasticity</a></li>  
                                    </ul>
                                </div>
                                <div class="text-center scroll" id="down"><i class="fas fa-angle-down"></i></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 d-xl-none d-block spacer-mob-md">
                        
                        <h3 class="nav-secondary-btn title-4 mb-0"> Container Registry </h3>
                        <div class="">
                            <a id="prev" href="#" class="btn btn-link btn-grey-noborder float-left">Previous module</a>
                            <a id="prev" href="#" class="btn btn-link btn-grey-noborder float-right">Next module</a>
                        </div>
                                                
                    </div>
                  
                </div>
            </nav>
			<!-- main content -->
            <main role="main" class="bg-gray">
                <div class="container">
                    <!-- progress bar -->
                    <section class="spacer-inner-tb-20">
                        <div class="row">
                            <div class="col-12">
                                <nav class="module-progress-bar" role="list">
                                    <a role="listitem" href="#" class="active"><i class="fas fa-play" aria-hidden="true"></i></a>
                                    <a role="listitem" href="#"><i class="fas fa-play" aria-hidden="true"></i></a>
                                    <a role="listitem" href="#"><i class="fas fa-play" aria-hidden="true"></i></a>
                                    <a role="listitem" href="#"><i class="fas fa-play" aria-hidden="true"></i></a>
                                    <a role="listitem" href="#"><i class="fas fa-code" aria-hidden="true"></i></a>
                                </nav>
                            </div>
                        </div>
                        <!-- content section -->
                        <section class="">
                            <div class="row">
                                <div class="content-section col-12">
                                    <!-- embed video -->
                                    <div class="embed-responsive embed-responsive-16by9 spacer-bt-30">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/C0DPdy98e4c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </div>
                                    <!-- content starts -->
                                    <h1 class="title-1 color-blue" role="heading">Pushing the Petstore images to Amazon Elastic Container Registry (ECR)</h1>
                                    <p class="timer" role="timer"><i class="far fa-clock" aria-hidden="true"></i> 15 minutes</p>
                                    <p>Before we can deploy our Petstore application to an orchestrator, we need to push our Petstore images to Amazon Elastic Container Registry (ECR). </p>
                                    <p>Amazon Elastic Container Registry (ECR) is a fully-managed Docker container registry that makes it easy for developers to store, manage, and deploy Docker container images. Amazon ECR is integrated with Amazon Elastic Container Service (ECS), simplifying your development to production workflow.</p>
                                    <h2 class="title-2" role="heading">Step 1</h2>
                                    <p>Log into your Amazon ECR registry using the helper provided by the AWS CLI.</p>
                                    <div class="code-snippet-light active">
                                        <div class="row">
                                            <div class="col-10 col-sm-11">
                                                <pre>eval $(aws ecr get-login --no-include-email)</pre>
                                            </div>
                                            <div class="col-2 col-sm-1 text-right">
                                                <i class="far fa-copy" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <h2 class="title-2" role="heading">Step 2</h2>
                                    <p>Use the AWS CLI to get information about the two Amazon ECR repositories that were created for you ahead of time. One repository will be for the Petstore PostgreSQL backend and the other will be for the Petstore web frontend.</p>
                                    <div class="code-snippet-light">
                                        <div class="row">
                                            <div class="col-10 col-sm-11">
                                                <pre>aws ecr describe-repositories --repository-name petstore_postgres petstore_frontend</pre>
                                            </div>
                                            <div class="col-2 col-sm-1 text-right">
                                                <i class="far fa-copy" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="code-snippet-dark">
                                        <div>
                                            <pre>    
{
    "repositories": [
    {
    "registryId": "123456789012",
    "repositoryName": "petstore_postgres",
    "repositoryArn": "arn:aws:ecr:us-west-2:123456789012:repository/petstore_postgres",
    "createdAt": 1533757748.0,
    "repositoryUri": "123456789012.dkr.ecr.us-west-2.amazonaws.com/petstore_postgres"
    },
    {
    "registryId": "123456789012",
    "repositoryName": "petstore_frontend",
    "repositoryArn": "arn:aws:ecr:us-west-2:123456789012:repository/petstore_frontend",
    "createdAt": 1533757751.0,
    "repositoryUri": "123456789012.dkr.ecr.us-west-2.amazonaws.com/petstore_frontend"
    }
    ]
}
                                    </pre>
                                        </div>
                                    </div>
                                    <h2 class="title-2" role="heading">Step 3</h2>
                                    <p>Verify that your Docker images exist by running the docker images command.</p>
                                    <div class="code-snippet-light">
                                        <div class="row">
                                            <div class="col-10 col-sm-11">
                                                <pre>docker images</pre>
                                            </div>
                                            <div class="col-2 col-sm-1 text-right">
                                                <i class="far fa-copy" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="code-snippet-dark">
                                        <div>
                                            <pre>    
REPOSITORY
containerize-application_petstore
&lt; none &gt;
postgres
maven
lambci/lambda
lambci/lambda
lambci/lambda
lambci/lambda
jboss/wildfly
                                    </pre>
                                        </div>
                                    </div>
                                    <h2 class="title-2" role="heading">Step 4</h2>
                                    <p>Tag the local docker images with the locations of the remote ECR repositories we created using our CloudFormation template</p>
                                    <div class="code-snippet-light">
                                        <div class="row">
                                            <div class="col-10 col-sm-11">
                                                <pre>docker tag postgres:9.6 $(aws ecr describe-repositories --repository-name petstore_postgres --query=repositories[0].repositoryUri --output=text):docker tag containerize-application_petstore:latest $(aws ecr describe-repositories --</pre>
                                            </div>
                                            <div class="col-2 col-sm-1 text-right">
                                                <i class="far fa-copy" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <h2 class="title-2" role="heading">Step 5</h2>
                                    <p>Once the images have been tagged, push them to the remote repository.</p>
                                    <div class="code-snippet-light">
                                        <div class="row">
                                            <div class="col-10 col-sm-11">
                                                <pre>docker push $(aws ecr describe-repositories --repository-name petstore_postgres --query=repositories[0].repositoryUri --output=text):latest
docker push $(aws ecr describe-repositories --repository-name petstore_frontend --query</pre>
                                            </div>
                                            <div class="col-2 col-sm-1 text-right">
                                                <i class="far fa-copy" aria-hidden="true"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="code-snippet-dark">
                                        <div>
                                            <pre>    
The push refers to repository [123456789012.dkr.ecr.us-west-2.amazonaws.com/petstore_postgres]
7856d1f55b98: Pushed
a125032aca95: Pushed
fcfc309521a9: Pushed
4c4e9f97ac56: Pushed
109402c6a817: Pushed
6663c6c0d308: Pushed
ed4da41a79a9: Layer already exists
7c050956ab95: Layer already exists
c6fcee3b341c: Layer already exists
998e6abcfae7: Layer already exists
df9515382700: Layer already exists
0fae9a7d0574: Layer already exists
add4404d0b51: Layer already exists
cdb3f9544e4c: Layer already exists
latest: digest: sha256:ca39b6107978303706aac0f53120879afcd0d4b040ead7f19e8581b81c19ecea size:
3243
                                        </pre>
                                        </div>
                                    </div>
                                </div>
                                <!-- next and previous-->
                                <div class="col-12 spacer-tb-15">
                                    <a id="prev" href="#" class="btn btn-link btn-grey-noborder float-left">Previous</a>
                                    <a id="next" href="#" class="btn btn-standard float-right" role="button">Next</a>
                                </div>
                            </div>
                        </section>
                    </section>
                </div>
            </main>
        </div>
        <!-- footer section-->
        <footer class="footer" role="contentinfo">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <p>&copy; 2019 AWS</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <!-- JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS, then site(custom) Js-->
    <script src="content/jquery/jquery-3.4.0.min.js" type="text/javascript"></script>
    <script src="content/bootstrap/js/popper.min.js" type="text/javascript"></script>
    <script src="content/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="content/js/site.js" type="text/javascript"></script>
</body>
</html>